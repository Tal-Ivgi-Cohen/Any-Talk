(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{316:function(e,t){},466:function(e,t,n){},467:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),s=n.n(a),c=n(20),o=n.n(c),i=n(52),u=n(41),l=n(11),p=n(21),d=n(22),h=n(24),j=n(23),g=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsx)("footer",{className:"app-footer",children:Object(r.jsx)("p",{children:"Copyrights Any-Talk by Tal Cohen 2021 \xa9 "})})}}]),n}(s.a.Component),b=n.p+"static/media/logo.b872e319.jpeg",m=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("header",{className:"app-header",children:[Object(r.jsx)("img",{className:"logo",src:b,alt:"logo"}),Object(r.jsxs)("nav",{children:[Object(r.jsx)(u.b,{to:"/",children:"Home"})," |",Object(r.jsx)(u.b,{to:"/chat",children:"chat"})," |",Object(r.jsx)(u.b,{to:"/login",children:"Login"})]})]})}}]),n}(s.a.Component),f=n(227),O=n.n(f),x=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"carousel-container",children:[Object(r.jsxs)("div",{className:"main-hero-content",children:[Object(r.jsx)("h1",{children:"Welcome to Any-Talk!"}),Object(r.jsx)(u.b,{className:"login-btn",to:"/login",children:"Login"})]}),Object(r.jsxs)(O.a,{className:"heros-container",children:[Object(r.jsx)("img",{src:"//cdn.pixabay.com/photo/2021/06/18/20/56/social-networks-6347153_960_720.jpg",alt:"social-networks"}),Object(r.jsx)("img",{src:"//cdn.pixabay.com/photo/2016/12/13/07/25/email-1903444_960_720.jpg",alt:"email"}),Object(r.jsx)("img",{src:"//cdn.pixabay.com/photo/2018/11/26/21/28/telephone-3840285_960_720.jpg",alt:"telephone"})]})]})}}]),n}(s.a.Component),v=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("section",{children:[Object(r.jsx)("div",{className:"home-section",children:Object(r.jsx)(x,{})}),Object(r.jsxs)("div",{className:"home-desc",children:[Object(r.jsxs)("p",{children:["Welcome to ",Object(r.jsx)("span",{children:"Any Talk."})]}),Object(r.jsx)("p",{children:"Communication platform Anytime, Anywhere "})]})]})}}]),n}(s.a.Component),w=n(4),k=n.n(w),y=n(8),C=n(48),N=n(14),S=n(228),U="/api/",I=n.n(S).a.create({withCredentials:!0}),M=function(e,t){return E(e,"GET",t)},T=function(e,t){return E(e,"POST",t)},L=function(e,t){return E(e,"PUT",t)},_=function(e,t){return E(e,"DELETE",t)};function E(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(k.a.mark((function e(t){var n,r,a,s=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:"get",r=s.length>2&&void 0!==s[2]?s[2]:null,e.prev=2,e.next=5,I({url:"".concat(U).concat(t),method:n,data:r,params:"GET"===n?r:null});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(n,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(r)),console.dir(e.t0),e.t0.response&&401===e.t0.response.status&&window.location.assign("/#/login"),e.t0;case 15:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var P={login:function(e){return D.apply(this,arguments)},logout:function(){return W.apply(this,arguments)},signup:function(e){return G.apply(this,arguments)},getUsers:function(){return M("user")},remove:function(e){return _("user/".concat(e))},update:function(e){return H.apply(this,arguments)},getLoggedinUser:J};function H(){return(H=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L("user/".concat(t._id),t);case 2:t=e.sent,J()._id===t._id&&F(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("auth/login",t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",F(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(){return(G=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("auth/signup",t);case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",F(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sessionStorage.clear(),e.next=3,T("auth/logout");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return sessionStorage.setItem("loggedinUser",JSON.stringify(e)),e}function J(e){return R.apply(this,arguments)}function R(){return(R=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",JSON.parse(sessionStorage.getItem("loggedinUser")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getUsers();case 3:n=e.sent,t({type:"SET_USERS",users:n}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("UserActions: err in loadUsers",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}window.userService=P;var X=n.p+"static/media/login.ae638c56.png",q=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={msg:"",loginCred:{nickname:"",password:""}},e.loginHandleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{loginCred:Object(N.a)(Object(N.a)({},e.loginCred),{},Object(C.a)({},r,a))}}))},e.doLogin=function(){var t=Object(y.a)(k.a.mark((function t(n){var r,a,s,c;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.loginCred,a=r.nickname,s=r.password,a){t.next=5;break}return t.abrupt("return",e.setState({msg:"Please enter nickname"}));case 5:c={nickname:a,password:s};try{e.props.login(c),e.setState({loginCred:{nickname:"",password:""}}),e.props.history.push("/chat")}catch(o){e.setState({msg:"Login failed, try again."})}case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=Object(r.jsxs)("section",{children:[Object(r.jsx)("div",{className:"login-area",children:Object(r.jsxs)("form",{onSubmit:this.doLogin,children:[Object(r.jsx)("input",{type:"text",name:"nickname",value:this.state.loginCred.nickname,onChange:this.loginHandleChange,placeholder:"Nickname",className:"login-form"}),Object(r.jsx)("input",{name:"password",type:"password",value:this.state.loginCred.password,onChange:this.loginHandleChange,placeholder:"Password",className:"login-form"}),Object(r.jsx)("button",{className:"login-btn",children:"Login"})]})}),Object(r.jsx)("div",{className:"signup",children:Object(r.jsx)(u.b,{className:"signup-btn",to:"/signup",children:"Create New Account"})})]}),t=this.props.loggedInUser;return Object(r.jsxs)("div",{className:"login",children:[Object(r.jsx)("h1",{className:"login-title",children:"Login"}),Object(r.jsx)("div",{className:"login-img",children:Object(r.jsx)("img",{src:X,alt:"login img"})}),Object(r.jsx)("p",{children:this.state.msg}),t&&Object(r.jsxs)("div",{className:"login-user",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("h3",{children:["Welcome ",t.fullname]})}),Object(r.jsx)("button",{className:"logout-btn",onClick:this.props.logout,children:"Logout"})]}),!t&&e]})}}]),n}(a.Component),V={login:function(e){return function(){var t=Object(y.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.login(e);case 3:(r=t.sent)&&n({type:"LOGIN",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in login",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},logout:function(){return function(){var e=Object(y.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.logout();case 3:t({type:"LOGOUT"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log("UserActions: err in logout",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},loadUsers:B},$=Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),V)(q),z=n(244),K=n(229),Q=n.n(K),Y=function(){var e=null,t={setup:function(){return Object(y.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,M("setup-session");case 4:e=Q()("",{reconnection:!1}),!0;case 6:case"end":return t.stop()}}),t)})))()},on:function(n,r){return Object(y.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,t.setup();case 3:e.on(n,r);case 4:case"end":return a.stop()}}),a)})))()},off:function(n){var r=arguments;return Object(y.a)(k.a.mark((function a(){var s;return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=r.length>1&&void 0!==r[1]?r[1]:null,e){a.next=4;break}return a.next=4,t.setup();case 4:s?e.off(n,s):e.removeAllListeners(n);case 5:case"end":return a.stop()}}),a)})))()},emit:function(n,r){return Object(y.a)(k.a.mark((function a(){return k.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return a.next=3,t.setup();case 3:e.emit(n,r);case 4:case"end":return a.stop()}}),a)})))()},terminate:function(){e=null,!1}};return t}();window.socketService=Y;var Z=n(243),ee=n(488),te=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={msg:{txt:""},msgs:[],topic:""},e.addMsg=function(t){e.setState((function(e){return{msgs:[].concat(Object(z.a)(e.msgs),[t])}}))},e.changeTopic=function(){Y.emit("chat topic",e.state.topic)},e.sendMsg=function(t){var n;t.preventDefault();var r=(null===(n=e.props.loggedInUser)||void 0===n?void 0:n.nickname)||"Me";Y.emit("chat newMsg",{from:r,txt:e.state.msg.txt}),e.setState({msg:{from:"Me",txt:""}})},e.handleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState(Object(C.a)({},r,a),e.changeTopic)},e.msgHandleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{msg:Object(N.a)(Object(N.a)({},e.msg),{},Object(C.a)({},r,a))}}))},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){Y.setup(),Y.emit("chat topic",this.state.topic),Y.on("chat addMsg",this.addMsg)}},{key:"componentWillUnmount",value:function(){Y.off("chat addMsg",this.addMsg),Y.terminate()}},{key:"render",value:function(){return Object(r.jsxs)("div",{className:"chat",children:[Object(r.jsxs)("p",{children:[Object(r.jsx)("span",{children:"Any talk"})," Chat"]}),Object(r.jsxs)("div",{className:"chat-label",children:[Object(r.jsx)("small",{children:"Press here and start to (Any)talk"}),Object(r.jsxs)("label",{children:[Object(r.jsx)("input",{type:"radio",name:"topic",value:"Public",onChange:this.handleChange}),"Public"]})]}),Object(r.jsx)(Z.a,{className:"messages",children:this.state.msgs.map((function(e,t){return Object(r.jsx)("li",{children:Object(r.jsxs)("div",{className:"message",children:[Object(r.jsx)(ee.a,{className:"avatar",children:e.from}),":",Object(r.jsxs)("span",{className:"message-txt",children:[" ",e.txt," "]})]})},t)}))}),Object(r.jsxs)("form",{className:"chat-form",onSubmit:this.sendMsg,children:[Object(r.jsx)("input",{type:"text",autoComplete:"off",className:"chat-input",value:this.state.msg.txt,onChange:this.msgHandleChange,name:"txt",placeholder:"Enter message"}),Object(r.jsx)("button",{children:"Send"})]})]})}}]),n}(a.Component),ne=Object(i.b)((function(e){return{loggedInUser:e.userModule.loggedInUser}}),{})(te),re=n.p+"static/media/signup.e17aaf9b.jpg",ae=function(e){Object(h.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(p.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={signupCred:{nickname:"",password:"",fullname:""}},e.signupHandleChange=function(t){var n=t.target,r=n.name,a=n.value;e.setState((function(e){return{signupCred:Object(N.a)(Object(N.a)({},e.signupCred),{},Object(C.a)({},r,a))}}))},e.doSignup=function(){var t=Object(y.a)(k.a.mark((function t(n){var r,a,s,c,o;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),r=e.state.signupCred,a=r.nickname,s=r.password,c=r.fullname,a&&s&&c){t.next=4;break}return t.abrupt("return",e.setState({msg:"All inputs are required"}));case 4:o={nickname:a,password:s,fullname:c},e.props.signup(o),e.setState({signupCred:{nickname:"",password:"",fullname:""}});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=Object(r.jsxs)("form",{className:"signup-form",onSubmit:this.doSignup,children:[Object(r.jsx)("input",{type:"text",name:"fullname",value:this.state.signupCred.fullname,onChange:this.signupHandleChange,placeholder:"Full name",autoComplete:"fullname"}),Object(r.jsx)("input",{name:"password",type:"password",value:this.state.signupCred.password,onChange:this.signupHandleChange,placeholder:"Password",autoComplete:"current-password"}),Object(r.jsx)("input",{type:"text",name:"nickname",value:this.state.signupCred.nickname,onChange:this.signupHandleChange,placeholder:"Nickname",autoComplete:"nickname"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{children:"Signup"})]}),t=this.props.loggedInUser;return Object(r.jsxs)("div",{className:"signup-area",children:[Object(r.jsx)("h1",{className:"signup-title",children:"Sign Up"}),Object(r.jsx)("div",{className:"signup-img",children:Object(r.jsx)("img",{src:re,alt:"login img"})}),t&&Object(r.jsxs)("div",{className:"login-user",children:[Object(r.jsx)("div",{children:Object(r.jsxs)("h3",{children:["Welcome ",t.fullname]})}),Object(r.jsx)("button",{className:"logout-btn",onClick:this.props.logout,children:"Logout"})]}),!t&&e]})}}]),n}(a.Component),se={signup:function(e){return function(){var t=Object(y.a)(k.a.mark((function t(n){var r;return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.signup(e);case 3:r=t.sent,n({type:"SIGNUP",user:r}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("UserActions: err in signup",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},loadUsers:B},ce=[{path:"/",component:v},{path:"/chat",component:ne},{path:"/login",component:$},{path:"/signup",component:Object(i.b)((function(e){return{users:e.userModule.users,loggedInUser:e.userModule.loggedInUser}}),se)(ae)}];function oe(){return Object(r.jsx)("div",{className:"app",children:Object(r.jsxs)(u.a,{children:[Object(r.jsx)(m,{}),Object(r.jsx)("main",{children:Object(r.jsx)(l.c,{children:ce.map((function(e){return Object(r.jsx)(l.a,{exact:!0,component:e.component,path:e.path},e.path)}))})}),Object(r.jsx)("footer",{children:Object(r.jsx)(g,{})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(466);var ie=n(58),ue=n(242),le=null;sessionStorage.loggedinUser&&(le=JSON.parse(sessionStorage.loggedinUser));var pe={loggedInUser:le,users:[]};var de=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ie.d,he=Object(ie.c)({userModule:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USERS":return Object(N.a)(Object(N.a)({},e),{},{users:t.users});case"SET_USER":case"LOGIN":return Object(N.a)(Object(N.a)({},e),{},{loggedInUser:t.user});case"LOGOUT":return Object(N.a)(Object(N.a)({},e),{},{loggedInUser:null});case"SIGNUP":return Object(N.a)(Object(N.a)({},e),{},{loggedInUser:t.user});default:return e}}}),je=Object(ie.e)(he,de(Object(ie.a)(ue.a))),ge=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,490)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};o.a.render(Object(r.jsx)(i.a,{store:je,children:Object(r.jsx)(oe,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ge()}},[[467,1,2]]]);
//# sourceMappingURL=main.340cfa20.chunk.js.map